笔记约定

*日期用斜体*
描述记录---
---

大阶段用===
===

# 主题用#
## 标题用##
### 小标题###
- 并列内容
  - 二级并列内容
#### 小小标题

大量并列的属性和描述等 用表格，少量用\`\`代码行

结构用代码块

*！注意点，要点，斜体*
**案例粗体**
*W*  单词斜体
图片命名：大标题序号-小标题序号-小序号
css：大标题序号-小标序号    名称-日期


*5-13*


# 移动端布局


## 移动端基础
### 常见移动端浏览器
- 国内常用的都是webkit修改来的内核，兼容移动端主流浏览器，处理webkit内核浏览器即可

### 手机屏幕现状
- 尺寸非常多，前端开发使用px，无需关注分辨率，了解即可

### 调试方法
- 谷歌浏览器调试工具模拟手机
- 搭建本地web服务器，手机服务器在同一个局域网内即可访问
- 使用外网服务器，直接ip或域名访问


## 视口
### viewport 就是浏览器显示页面内容的屏幕区域，分类如下：
- 布局视口  layout viewport
  - 一般移动端浏览器默认设置了一个布局视口，早期用于在手机上显示pc页面
  - iOS和Android基本都是980px，pc网页大多能在手机呈现，但是元素很小需要缩放，不方便
- 视觉视口  visual viewport
  - 指用户正在看到的网站区域
  - 可以缩放去操作视觉视口，但不会影响布局视口，布局视口宽度不变
- 理想视口  ideal viewport
  - 苹果提出的，为了使网页在移动端有最理想的浏览和阅读宽度而设定，对设备来讲是最理想的视口尺寸
  - 需要手动添加meta视口标签，通知浏览器操作
  - meta视口标签的主要目的：布局视口宽度和理想视口一致，设备有多宽，布局视口就多宽
  
### meta 视口标签
`<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0,maximum-scale=1.0, minimum-scale=1.0">

| 属性          | 说明                                   |
| ------------- | -------------------------------------- |
| width         | 设置视口宽度，device-width表示设备宽度 |
| initial-scale | 初始缩放比，大于0的数                  |
| maximum-scale | 最大缩放比，大于0                      |
| minimum=scale | 最小缩放比，大于0                      |
| user-scalable | 用户是否可以缩放，yes或no（1或0）      |

## 二倍图
### 物理像素与物理像素比
- 物理像素指屏幕显示最小单位，是物理真是存在
- pc端1px一般等于1物理像素，移动端开发中的1px不一定等于1物理像素
- 1px所能显示的物理像素点个数，称为物理像素比或屏幕像素比
>例如:iphone8中1px就对应屏幕上2物理像素
- pc和早期手机屏幕的1css像素=1物理像素
- 为了提高手机屏幕细腻程度，使用了一种Retina（视网膜屏幕）技术，将更多像素点压缩到一块屏幕里，从而达到更高分辨率

### 多倍图
- 由于使用Retina技术，图片在手机中会按物理像素比放大到原来的n倍，导致出现模糊
- 为解决此问题，需要提高图片质量，把图片预先放大n倍，然后缩放到屏幕上，这样缩放在当前倍数下就是无损缩放
- 背景图片处理方法类似
*!精灵图处理方法：首先确定原图宽高和位置坐标，然后拿坐标除以物理像素比，因为图片会放大n倍，坐标也跟着放大了，需要缩小回原来的，并且通过bg-size:图片宽度的一半（用px） auto来缩放图片，另一种简单方法是，先把图片缩小n倍，再进行测量，这样不用计算*

```background-size:x y;```
- x是水平方向的长度，y是垂直方向的长度
- 只写一个默认是设置宽度，高度等比拉伸
- 单位      长度|百分比|cover|contain
- cover     表示背景等比例完全拉伸覆盖盒子，没有空白
- contain   表示等比拉伸，直到铺满宽或高，任一铺满就不管了，可能有空白

## 移动端开发主流方案
- 单独制作移动端页面（主流）    根据设备判断，手机打开单独的移动端页面
- 响应式页面兼容移动端（其次）  根据屏幕宽度判断样式，只有一个页面，但是制作麻烦，很多兼容性问题    

## 移动端技术解决方案
### 移动端以webkit为主，可以放心使用H5C3，私有前缀只需添加webkit
### css初始化：normalize.css(github上使用广泛的一个css初始化)
- 这个css保护了有价值的默认值，修复了浏览器bug，是模块化的，有详细文档
### C3盒子模型
- ```box-sizing:border-box;```
- 边框包括进盒子宽高，padding不撑大盒子尺寸
- ```box-sizing:content-box;```是传统盒子模型，宽高只算内容，不算宽高，pc考虑兼容性就用这个

### 特殊样式
```css
    *{
    /* webkit额外初始化 */
    box-sizing:border-box;
    -webkit-box-sizing:border-box;
    /* 清除点击高亮 */
    -webkit-tap-highlight-color:transparent;
    }
    input{
    /* 移动端浏览器加上这个属性才能修改按钮和输入框自定义样式 */
    -webkit-appearance:none;
    }
    img,
    a{
    /* 禁用长按弹出的菜单 */
    -webkit-touch-callout:none;
    }
```

## 移动端常见布局
### 单独制作移动端页面
- 流式布局（百分比布局）
- flex弹性布局（强烈推荐）
- less+rem+媒体查询布局
- 混合布局

### 响应式页面兼容移动端
- 媒体查询
- bootstrap


*5-14*


# 流式布局
- 又名百分比布局，非固定像素布局
- 设置宽度为百分比，根据屏幕宽度进行伸缩，内容向两侧自动填充
- 是移动web开发比较常见的布局方式
## 实际中不能无限制放大缩小，需要加最大和最小宽或高
- max-width|max-height  最大宽度 高度
- min-width|min-height  最小宽度 高度
*!常用组合：*
`min-width:320px;max-width:npx;`

## 综合案例
**案例：1-1.京东移动首页流式布局.html**

### 1.技术选型：
- 方案：单独制作移动页面
- 技术：流式布局
### 2.搭建文件夹结构
- css+images+upload+index.html(案例名就不搞index.html了)

### 3.设置视口标签，引入初始化样式
- 页面初始化样式，body100%，居中，限定最小最大宽度320px和960px，设置字体
```css
/* body初始化，有需要改的覆盖即可 */
body {
    margin: 0 auto;
    width: 100%;
    /* 设置最小最大宽度 */
    min-width: 320px;
    max-width: 640px;
    background: #fff;
    font-size: 1rem;
    font-family: -apple-system, Helvetica, sans-serif;
    line-height: 1.5;
    color: #666;
}
```

## 布局分析
- header.app
- search-wrap
- main-content
- nav
- news
### 结构
```html
<body>
    <!-- header -->
    <header class="app">
        <ul>
            <li>
                <img src="images/01-05.png">
            </li>
            <li>
                <img src="images/01-03.png">
            </li>
            <li>
                打开京东App，购物更轻松
            </li>
            <li>
                立即打开
            </li>
        </ul>
    </header>
    <!-- search -->
    <div class="search-wrap">
        <div class="search-btn"></div>
        <div class="search">
            <div class="jd-icon"></div>
            <div class="sou-icon"></div>
            <!-- <input type="search"> -->
        </div>
        <div class="search-login">登录</div>
    </div>

    <!-- main -->
    <div class="main-content">
        <div class="slider">
            <img src="upload/01-01.dpg" alt="">
        </div>
        <!-- 品牌日 -->
        <div class="brand">
          <!-- dov*3 -->
          <div><img src="upload/01-10.dpg" alt=""></div>


        </div>
    </div>

    <!-- nav -->
    <div class="nav clearfix">
      <!-- a*10 -->
        <a href="#">
            <img src="upload/01-02.webp" alt="">
            <span>京东超市</span>
        </a>
    </div>
<!-- news -->
    <div class="news">
      <!-- a*3 -->
        <a href="#"><img src="upload/01-06.dpg" alt=""></a>
    </div>
</body>
</html>
```


# flex布局
## flex是flexible box的缩写，意为弹性布局，具有极大灵活性，任何容器都可以指定为flex布局
- 父盒子设为flex布局后，子元素的float clear vertical-align属性将失效
- flex布局的别名：伸缩布局 弹性布局 伸缩盒布局 弹性盒布局

## 布局原理
- 采用flex布局的元素，称为flex container，简称“容器”,他的子元素自动成为容器成员，成为flex item，简称“项目”
- 子容器可以横向纵向自由排列
- 总结：通过给父级加flex属性，控制子盒子位置和排列方式

## 常见父项属性
| 父项属性        | 说明                                              |
| --------------- | ------------------------------------------------- |
| flex-direction  | 设置主轴方向                                      |
| justify-content | 设置主轴上的子元素排列方式                        |
| flex-wrap       | 设置子元素是否换行                                |
| align-content   | 设置侧轴上子元素排列方式（多行）                  |
| align-items     | 设置侧轴上子元素排列方式（单行）                  |
| flex-flow       | 复合属性，相当于同时设置flex-direction和flex-wrap |

### flex-direction 设置主轴方向
- flex布局中，分为主轴侧轴，同样的叫法：行和列，x轴y轴
- 默认主轴方向就是x轴方向，水平向右
- 默认侧轴方向就是y轴方向，垂直向下
#### 属性值
*!主轴侧轴是会变化的，确定谁是主轴后，垂直对应的另一条轴就是侧轴，子元素跟着主轴排列*
| 属性值         | 说明     |
| -------------- | -------- |
| row（默认）    | 从左到右 |
| row-reverse    | 从右到左 |
| column（默认） | 从上到下 |
| column-reverse | 从下到上 |

*W*  
reverse 翻转 颠倒 使相反 使反转
**案例：2-2.flex主轴方向.html**

### justify-content 设置主轴子元素排列方式
- 用于设置主轴对齐方式，使用前确认主轴是谁
#### 属性值
| 属性值          | 说明                                               |
| --------------- | -------------------------------------------------- |
| flex-start      | 默认值，从头部开始（沿主轴正方向）                 |
| flex-end        | 从尾部开始（沿主轴负方向）                         |
| center          | 主轴居中对齐，主轴是x轴就水平居中，是y轴就垂直居中 |
| space-around    | 平均分配剩余空间                                   |
| *space-between* | 先两边贴边，再平分剩余空间                         |

**案例：2-3.flex设置主轴元素排列方式.html**

### flex-wrap
默认情况下，flex项目不换行，装不下会缩小子元素宽度
#### 属性值
- nowrap    默认值，不换行
- wrap      自动换行

### align-items (单行）设置侧轴排列方式
#### 属性值
| 属性值     | 说明                       |
| ---------- | -------------------------- |
| flex-start | 默认，侧轴正方向，上往下   |
| flex-end   | 侧轴负方向                 |
| center     | 垂直居中                   |
| stretch    | 子项元素在侧轴上平分父元素 |

*W*
stretch 拉伸
### align-content （多行）设置侧轴排列方式
设置子项侧轴排列，并且只能用于子项出现*换行*的情况
*！单行无效，必须出现换行*
#### 属性值
| attribute value | explanation                              |
| --------------- | ---------------------------------------- |
| flex-start      | 默认，侧轴头部开始                       |
| flex-end        | 尾部开始                                 |
| center          | 侧轴居中                                 |
| space-around    | 平分剩余空间                             |
| space-between   | 子项在侧轴西安分部在两头，在平分剩余空间 |
| stretch         | 子项元素高度平分父元素高度               |

- 总结：单行用align-items 多行用align-content
  
**案例：2-4.flex侧轴对齐方式.html**
### flex-flow 复合写法
#### 是flex-direction和flex-wrap属性的复合属性
`flex-flow:row wrap;`

## 子项常见属性
### flex
- 定义子项分配剩余空间的份数，默认为0
- 是根据比例来分配的，先将所有flex相加得到总份数，然后分配flex值对应的宽
- 不要直接设置宽度，否则无效
- `flex:1`拿来做整齐的模块非常方便

**案例：2-5.flex子项剩余空间份数.html**

### align-self 单独某个子项在侧轴的对齐方式

### order       定义项目排列顺序
- 数值越小越靠前，默认为0
- 和z-index不一样

## 综合案例
**案例：2-6.携程网移动端首页.html**

### 技术选型
单独制作移动端页面

### 搭建相关文件夹结构
css images upload index.html

### 引入样式，添加视口标签
```css
body {
    max-width: 540px;
    min-width: 320px;
    margin: 0 auto;
    font: normal 14px/1.5 Tahoma, "Lucida Grande", Verdana, "Microsoft Yahei", STXihei, hei;
    color: #000;
    background: #f2f2f2;
    /* 注意：此处是overflow-x:hidden,是禁止左右滑动屏幕，如果不加-x就会上下也不能滑动 */
    overflow-x: hidden;
    -webkit-tap-highlight-color: transparent;
}
a {
    text-decoration: none;
    color: #222;

}
div {
    box-sizing: border-box;
}
ul {
    list-style: none;
    padding: 0;
}
```

### 布局分析
#### search-index 主页搜索
- 固定定位，左右两个box，右边的固定宽高，然后左边flex:1自适应剩余空间，图标用伪元素+定位或者em标签
#### focus 焦点图
- 给个上内或外边距占掉上面脱标的search盒子位置，然后img100%即可
#### local-nav 本地导航
- 采取ul>li>a>span*2的做法，span1给统一排序的class做图标，方便选择器选取,最后flex:1平分;
- 
*!1.常用竖排图标+文字按钮做法，上面span放精灵图背景，下面span放文字*

*！2.给父级a加`display:flex;`，`flex-direction:column;`主轴改为y轴,`items-align:center;`侧轴居中对齐，子项`flex:1;`平分宽度*

*！3.图标的class要有相同前缀且有不同序号，方便统一设置样式，分别换图标*

*！flex子项也可以设置display:flex成为容器*
#### nav 主导航栏
- 制作圆角：border-radius+overflow:hidden
- 内部由三个相似的nav-common组成，其内部又可以分成三个相同的列，列里面再分相同宽高的上下两行，都可以用flex平分
  - nav-common给高度，然后设为容器
  - nav-items(nav-column)用flex:1平分
  - 后两个items设为容器，里面两个a，将主轴设为y轴，让a上下排
  - 最后给a设置样式，ta-center，行高，使其居中，颜色，字体，阴影
- 需注意，第一个a的背景图用的三倍图
- nav-common背景使用了渐变色

- `background: -webkit-linear-gradient(起始方位,起始颜色,末尾颜色);`
  - 方位用方位词表示，可同时写两个方位表示夹角方位，中间用空格分开

#### subnav-entry  侧导航入口
- ul>li>a>span+span 和上面差不多
- 需要注意的是，内容需要换行，flex-wrap:wrap+flex:20%
- flex可以是百分比，表示占父级容器主轴上剩余空间的百分比

#### sale-box   
- sale-hd>h2+a.more  绝对定位来做
  - h2是为了seo优化？ 把文字切掉
  - 右边a.more里，用伪元素的上、右边框+旋转做箭头
- sale-bd>(row>2a)*3     用flex:1平分，,a里放img，图片宽度100%即可